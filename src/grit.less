/* GRIT - by Maximilian Vincent Heidenreich 12.01.2022 */
/*
 * A simple and extremely lightweight collection of classes for quickly building 
 * responsive web layouts targeting mobile and desktop experiences.
 *
 * Source: XXX
 */

/* Custom properties & Variables */
@grt-mixin-start: 1;
@grt-mixin-end: 32;
@width-sm: 320px;
@width-md: 768px; /* At this breakpoint, md-xxx classes will be used */
@width-lg: 1200px;
@width-xl: 1680px;

:root {
    /* Media Queries */
    --grt-media-phone: @width-sm;
    --grt-media-tablet: @width-md;
    --grt-media-desktop: @width-lg;
    --grt-media-large: @width-xl;

    /* Layout */
    /*--grt-cols: var(--grt-columns-mobile); */
    --grt-wrapper-max-width-sm: @width-sm;
    --grt-wrapper-max-width-md: @width-md;
    --grt-wrapper-max-width-lg: @width-lg;
    --grt-wrapper-max-width-xl: @width-xl;

    --grt-cols-mobile: 12;
    --grt-cols-desktop: 32;
    --grt-padding-cols-mobile: 1;
    --grt-padding-cols-desktop: 2;
}

/* .grit mixins */
.grit-mixin() {
    box-align: start;
    -ms-flex-align: start;
    display: grid;
    grid-template-columns: repeat(var(--grt-cols), 1fr);
    grid-column: 1 / span var(--grt-cols);
    align-items: start;
}
.grit-cols-mixin(@cols:0) {
    --grt-cols: @cols;
}
.grit {
    --grt-cols: var(--grt-cols-mobile);
    .grit-mixin();
}

/* Generates .grit-x classes */
.grit-mixin-loop(@a) when (@a <= 12) {
    .grit-@{a} {
        .grit-cols-mixin(@a);
        .grit-mixin();
    }
    .grit-mixin-loop((@a + 1));
}
.grit-mixin-loop(2);

/* Generates .md-grit-x classes */
.md-grit-mixin-loop(@a) when (@a <= 12) {
    .md-grit-@{a} {
        .grit-cols-mixin(@a);
        .grit-mixin();
    }
    .md-grit-mixin-loop((@a + 1));
}

/* Opinionated content wrapper with default "padding" columns right & left */
.grit-content-mixin(@cols) {
    grid-column: calc(@cols + 1) / calc(var(--grt-cols) - calc(@cols - 1));
}
.grit > .content {
    .grit-content-mixin(1);

    width: 100%;
    height: 100%;

    &.overlap {
        grid-row: 1;
    }
}

/* Generates .content-x classes */
.content-mixin-loop(@a) when (@a <= ((@grt-mixin-end / 2) - 1)) {
    .grit > .content-@{a} {
        .grit-content-mixin(@a);
    }
    .content-mixin-loop((@a + 1));
}
.content-mixin-loop(0);

/* Generates .md-content-x classes */
.md-content-mixin-loop(@a) when (@a <= ((@grt-mixin-end / 2) - 1)) {
    .grit > .md-content-@{a} {
        .grit-content-mixin(@a);
    }
    .md-content-mixin-loop((@a + 1));
}

/* Opinionated wrappers with max-width. Use as grit parent */
.grit-wrapper  {
    margin: 0 auto;
    max-width: var(--grt-wrapper-max-width-xl);
}
.grit-wrapper-sm  {
    margin: 0 auto;
    max-width: var(--grt-wrapper-max-width-sm);
}
.grit-wrapper-md  {
    margin: 0 auto;
    max-width: var(--grt-wrapper-max-width-md);
}
.grit-wrapper-lg  {
    margin: 0 auto;
    max-width: var(--grt-wrapper-max-width-lg);
}

/* .grt-{start}-{end} Mixin */
/* Can be used to easily position elements on the grid with a single class */
/* Vertical positioning should be achieved through multiple grit elements */
.grt-mixin(@a:0, @b:0) {
    .grt-@{a}-@{b} {
        grid-column: @a / @b;
    }
}
.md-grt-mixin(@a:0, @b:0) {
    .md-grt-@{a}-@{b} {
        grid-column: @a / @b;
    }
}

/* Generates grt-a-b classes */
.pos-mixin-loop(@start:1, @end:1) {
    @a: @start;
    @b: @start;
    .aLoop(@a) when (@a <= @end) {
        .bLoop(@b) when (@b <= (@end + 1)) {
            .grt-mixin(@a, @b);
            .bLoop((@b + 1));
        }
        .bLoop((@a + 1));
        .aLoop((@a + 1));
    }
    .aLoop(@a);
}
.pos-mixin-loop(1, 32);

/* Generates md-grt-a-b classes */
.md-pos-mixin-loop(@start:1, @end:1) {
    @a: @start;
    @b: @start;
    .aLoop(@a) when (@a <= @end) {
        .bLoop(@b) when (@b <= (@end + 1)) {
            .md-grt-mixin(@a, @b);
            .bLoop((@b + 1));
        }
        .bLoop((@a + 1));
        .aLoop((@a + 1));
    }
    .aLoop(@a);
}

/* Media Queries */
@media (min-width: @width-md) {
    /* .grit */
    .grit {
        --grt-cols: var(--grt-cols-desktop);
    }

    /* .grit-x */
    .grit-mixin-loop(2);

    /* .md-grit-x */
    .md-grit-mixin-loop(2);

    /* .grit > .content */
    .grit > .content {
        .grit-content-mixin(4);
    }

    /* .grit > .content-x */
    .md-content-mixin-loop(0);

    /* .md-grt-x-x  */
    .md-pos-mixin-loop(1, 32);
}
